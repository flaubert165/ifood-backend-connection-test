<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="infrastructure.repositories.IAuthenticationRepository">
    <update id="login">
        UPDATE user SET status = #{arg1} WHERE id = #{arg0}
    </update>
    <update id="logout">
        UPDATE user SET status = #{arg1} WHERE id = #{arg0}
    </update>
    <select id="getUserByEmail" resultType="domain.entities.User">
        SELECT * FROM user WHERE email = #{arg0} LIMIT 1
    </select>
    <select id="getUserById" resultType="domain.dto.outputs.UserOutputDto">
        SELECT * FROM user WHERE id = #{arg0} LIMIT 1
    </select>
    <select id="getUnavailabilityScheduleById" resultType="domain.dto.outputs.UnavailabilityScheduleOutputDto">
        SELECT * FROM unavailability_schedule WHERE userId = #{arg0} AND
        (date(start) = date(now())) AND (date(end) = date(now()));
    </select>
</mapper>